geom_sf(data = Outer_Suburbs[Outer_Suburbs$STATEFP == 42, ], fill = "black")
#Download geographies of interest (in this case, the CBSA)
CBSA_2011 <- core_based_statistical_areas(resolution = "500k", year = 2011) %>%
filter(str_detect(NAME, CBSA))
#Download tracts of interest
Tracts_2011 <- map_dfr(c(ST), ~{
tracts(.x, year = YR)})
#Acquiring the central city geographies
CentralCities_2011 <- places(state = ST, year = YR) %>%
filter(str_detect(NAMELSAD, CENTRAL_CITY))
#Spatial filter of tracts for the city of interest
Tracts_2011 <- Tracts_2011[CBSA_2011, ]
#Removing the CDP tracts
Tracts_2011 <-  Tracts_2011[lengths(st_intersects(Tracts_2011,CentralCities_2011))==0,]
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_touches(Tracts_2011,CentralCities_2011))==0,] %>%
mutate(Suburb = "Inner")
#Isolating the inner suburban tract
Outer_Suburbs <-  Tracts_2011[lengths(st_touches(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Outer")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 42, ], fill = "white") +
geom_sf(data = Outer_Suburbs[Outer_Suburbs$STATEFP == 42, ], fill = "black")
#Download geographies of interest (in this case, the CBSA)
CBSA_2011 <- core_based_statistical_areas(resolution = "500k", year = 2011) %>%
filter(str_detect(NAME, CBSA))
#Download tracts of interest
Tracts_2011 <- map_dfr(c(ST), ~{
tracts(.x, year = YR)})
#Acquiring the central city geographies
CentralCities_2011 <- places(state = ST, year = YR) %>%
filter(str_detect(NAMELSAD, CENTRAL_CITY))
#Spatial filter of tracts for the city of interest
Tracts_2011 <- Tracts_2011[CBSA_2011, ]
#Removing the CDP tracts
Tracts_2011 <-  Tracts_2011[lengths(st_within(Tracts_2011,CentralCities_2011))==0,]
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_touches(Tracts_2011,CentralCities_2011))==0,] %>%
mutate(Suburb = "Inner")
#Isolating the inner suburban tract
Outer_Suburbs <-  Tracts_2011[lengths(st_touches(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Outer")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 42, ], fill = "white") +
geom_sf(data = Outer_Suburbs[Outer_Suburbs$STATEFP == 42, ], fill = "black")
View(Outer_Suburbs)
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
View(InnerOuter_Suburbs)
#Table B25034 - Year Structure Built
#Filter Pre- and Post-CR housing
#Rename raw variables with codebook labels
HousingData_2011 <- get_acs(year = YR,
geography = GEOG,
state = ST,
table = "B25034",
summary_var = "B25034_001",
geometry = TRUE) %>%
mutate(Era = case_when(
variable == "B25034_001" ~ "Total",
variable >= "B25034_008" ~ "PreCR",
variable <= "B25034_007" ~ "PostCR")) %>%
mutate(variable = case_when(
variable == "B25034_001" ~ "Total",
variable == "B25034_002" ~ "2011orlater",
variable == "B25034_003" ~ "2010to2014",
variable == "B25034_004" ~ "2000to2009",
variable == "B25034_005" ~ "1990to1999",
variable == "B25034_006" ~ "1980to1989",
variable == "B25034_007" ~ "1970to1979",
variable == "B25034_008" ~ "1960to1969",
variable == "B25034_009" ~ "1950to1959",
variable == "B25034_010" ~ "1940to1949",
variable == "B25034_011" ~ "1939orbefore")) %>%
mutate(PercentofHousing = 100 * (estimate / summary_est)) %>%
group_by(GEOID, Era) %>%
mutate(CR_HousingStock=sum(PercentofHousing)) %>%
ungroup %>%
mutate(PostCRsuburb = case_when(
Era == "PostCR" & CR_HousingStock >= 75 ~ "Yes",
Era == "PostCR" & CR_HousingStock <= 75 ~ "No",
Era == "PreCR" ~ "No"))
#Download geographies of interest (in this case, the CBSA)
CBSA_2011 <- core_based_statistical_areas(resolution = "500k", year = 2011) %>%
filter(str_detect(NAME, CBSA))
#Spatial filter of tracts for the city of interest
HousingData_2011 <- HousingData_2011[CBSA_2011, ]
#Acquiring the central city geographies
CentralCities_2011 <- places(state = ST, year = YR) %>%
filter(str_detect(NAMELSAD, CENTRAL_CITY))
#Removing the central city tracts from the Housing Data
HousingData_2011 <-  HousingData_2011[lengths(st_intersects(HousingData_2011,CentralCities_2011))==0,]
#Tidy the dataset
HousingData_2011 <- HousingData_2011 %>%
separate(
NAME,
into = c("Tract", "County", "State"),
sep = ", "
) %>%
rename(Age = variable) %>%
select(GEOID, County, State, PostCRsuburb, Era, estimate, moe, PercentofHousing, Age, CR_HousingStock, geometry) %>%
filter(!Age == "Total")
#Erase water bodies, rivers, lakes
HousingData_2011 <- erase_water(HousingData_2011)
#Creating an object of post-CR tracts
PostCR_suburbs_2011 <- HousingData_2011 %>%
select(GEOID, County, State, PostCRsuburb, geometry)
View(PostCR_suburbs_2011)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[Inner_Suburbs$STATEFP == 42, ])
InnerOuter_Suburbs <- erase_water(Inner_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ])
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ],
aes(fill = Suburb))
#Erase water bodies, rivers, lakes
InnerOuter_Suburbs <- erase_water(InnerOuter_Suburbs)
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
InnerOuter_Suburbs <- erase_water(InnerOuter_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ],
aes(fill = Suburb))
#Isolating the Outer suburban tract
Outer_Suburbs <-  Tracts_2011[lengths(st_touches(Tracts_2011,CentralCities_2011))==0,] %>%
mutate(Suburb = "Outer")
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_touches(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
#Joining Inner/Outer suburbs
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
#Erase water bodies, rivers, lakes
InnerOuter_Suburbs <- erase_water(InnerOuter_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ],
aes(fill = Suburb))
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb))
View(CentralCities_2011)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb)) +
geom_sf(data = Outer_Suburbs[Outer_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "Black")
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb)) +
geom_sf(data = Outer_Suburbs[Outer_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], fill = "Black")
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], fill = "Black")
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "black")
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_crosses(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
Inner_Suburbs <-  Tracts_2011[lengths(st_crosses(CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_touches(CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ],
aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_intersects(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
#Download geographies of interest (in this case, the CBSA)
CBSA_2011 <- core_based_statistical_areas(resolution = "500k", year = 2011) %>%
filter(str_detect(NAME, CBSA))
#Download tracts of interest
Tracts_2011 <- map_dfr(c(ST), ~{
tracts(.x, year = YR)})
#Acquiring the central city geographies
CentralCities_2011 <- places(state = ST, year = YR) %>%
filter(str_detect(NAMELSAD, CENTRAL_CITY))
#Spatial filter of tracts for the city of interest
#Filtering the census tracts for our geographies of interest
Tracts_2011 <- Tracts_2011[CBSA_2011, ]
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_intersects(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_touches(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_disjoint(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_crosses(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_within(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_contains(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_covers(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_covered_by(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black")
Inner_Suburbs <-  Tracts_2011[lengths(st_is_within_distance(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_equals_exact(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_covers(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
Inner_Suburbs <-  Tracts_2011[lengths(st_covers(Tracts_2011,CentralCities_2011))==0,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths( st_touches(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths( st_touches(Tracts_2011,CentralCities_2011))==0,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==0,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], fill = "black") +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
Tracts_2011 <-  Tracts_2011[lengths(st_within(Tracts_2011,CentralCities_2011))==0,]
#Isolating the Outer suburban tract
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==0,] %>%
mutate(Suburb = "Outer")
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
#Joining Inner/Outer suburbs
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
#Erase water bodies, rivers, lakes
InnerOuter_Suburbs <- erase_water(InnerOuter_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
#Download geographies of interest (in this case, the CBSA)
CBSA_2011 <- core_based_statistical_areas(resolution = "500k", year = 2011) %>%
filter(str_detect(NAME, CBSA))
#Download tracts of interest
Tracts_2011 <- map_dfr(c(ST), ~{
tracts(.x, year = YR)})
#Acquiring the central city geographies
CentralCities_2011 <- places(state = ST, year = YR) %>%
filter(str_detect(NAMELSAD, CENTRAL_CITY))
#Spatial filter of tracts for the city of interest
#Filtering the census tracts for our geographies of interest
Tracts_2011 <- Tracts_2011[CBSA_2011, ]
#Isolating the Outer suburban tract
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==0,] %>%
mutate(Suburb = "Outer")
#Isolating the inner suburban tract
Inner_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
#Joining Inner/Outer suburbs
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
ggplot() +
geom_sf(data = Tracts_2011[Tracts_2011$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
ggplot() +
geom_sf(data = Tracts_2011[Tracts_2011$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow")
ggplot() +
geom_sf(data = Tracts_2011[Tracts_2011$STATEFP == 37, ])
ggplot() +
geom_sf(data = Tracts_2011[Tracts_2011$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_buffer(CentralCities_2011, dist = 25),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ])
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_buffer(CentralCities_2011, dist = 1),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
Inner_Suburbs <-  Tracts_2011[lengths(st_buffer(Tracts_2011,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
test <- Tracts_2011[st_buffer(CentralCities_2011, dist = -1),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_buffer(CentralCities_2011, dist = 0),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_intersect(CentralCities_2011, dist = 0),]
test <- Tracts_2011[st_intersection(CentralCities_2011, dist = 0),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_buffer(CentralCities_2011, dist = 0),]
stest <- t_intersection(Tracts_2011, CentralCities_2011, model = "closed")
stest <- st_intersection(Tracts_2011, CentralCities_2011, model = "closed")
test <- st_intersection(Tracts_2011, CentralCities_2011, model = "closed")
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- st_intersection(Tracts_2011, CentralCities_2011, model = "open")
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_buffer(CentralCities_2011, dist = 0),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_difference(CentralCities_2011, dist = 0),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[st_buffer(CBSA_2011, dist = 0),]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[CentralCities_2011, ]
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <-  test[lengths(st_within(test,CentralCities_2011))==1,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
test <- Tracts_2011[CentralCities_2011, ]
test <-  test[lengths(st_within(test,CentralCities_2011))==0,]%>%
mutate(Suburb = "Inner")
ggplot() +
geom_sf(data = test[test$STATEFP == 37, ]) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
#Download geographies of interest (in this case, the CBSA)
CBSA_2011 <- core_based_statistical_areas(resolution = "500k", year = 2011) %>%
filter(str_detect(NAME, CBSA))
#Download tracts of interest
Tracts_2011 <- map_dfr(c(ST), ~{
tracts(.x, year = YR)})
#Acquiring the central city geographies
CentralCities_2011 <- places(state = ST, year = YR) %>%
filter(str_detect(NAMELSAD, CENTRAL_CITY))
#Spatial filter of tracts for the city of interest
#Filtering the census tracts for our geographies of interest
Tracts_2011 <- Tracts_2011[CBSA_2011, ]
#Removing the CDP tracts
#This removes the inner/urban area
Tracts_2011 <-  Tracts_2011[lengths(st_within(Tracts_2011,CentralCities_2011))==0,]
#To isolate the Inner suburban tracts
Inner_Suburbs <- Tracts_2011[CentralCities_2011, ]
Inner_Suburbs <-  Inner_Suburbs[lengths(st_within(Inner_Suburbs,CentralCities_2011))==0,]%>%
mutate(Suburb = "Inner")
#Isolating the Outer suburban tracts
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==0,]
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,Inner_Suburbs))==0,] %>%
mutate(Suburb = "Outer")
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ], fill = Suburb)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ], aes(fill = Suburb))
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
#Isolating the Outer suburban tracts
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==1,]
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,Inner_Suburbs))==1,] %>%
mutate(Suburb = "Outer")
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
#Isolating the Outer suburban tracts
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,Inner_Suburbs))==0,]
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==0,] %>%
mutate(Suburb = "Outer")
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Pittsburgh", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 53, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Portland", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 41, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Portland", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ], aes(fill = Suburb))
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ], aes(fill = Suburb))
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Pittsburgh", ], color = "yellow", fill = NA)
#Download geographies of interest (in this case, the CBSA)
CBSA_2011 <- core_based_statistical_areas(resolution = "500k", year = 2011) %>%
filter(str_detect(NAME, CBSA))
#Download tracts of interest
Tracts_2011 <- map_dfr(c(ST), ~{
tracts(.x, year = YR)})
#Acquiring the central city geographies
CentralCities_2011 <- places(state = ST, year = YR) %>%
filter(str_detect(NAMELSAD, CENTRAL_CITY))
#Spatial filter of tracts for the city of interest
#Filtering the census tracts for our geographies of interest
Tracts_2011 <- Tracts_2011[CBSA_2011, ]
#Removing the CDP tracts
#This removes the inner/urban area
Tracts_2011 <-  Tracts_2011[lengths(st_within(Tracts_2011,CentralCities_2011))==0,]
#To isolate the Inner suburban tracts
Inner_Suburbs <- Tracts_2011[CentralCities_2011, ]
Inner_Suburbs <-  Inner_Suburbs[lengths(st_within(Inner_Suburbs,CentralCities_2011))==0,]%>%
mutate(Suburb = "Inner")
#Isolating the Outer suburban tracts
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,Inner_Suburbs))==0,]
Outer_Suburbs <-  Tracts_2011[lengths(st_overlaps(Tracts_2011,CentralCities_2011))==0,] %>%
mutate(Suburb = "Outer")
#Joining Inner/Outer suburbs
InnerOuter_Suburbs <- rbind(Inner_Suburbs, Outer_Suburbs)
#Erase water bodies, rivers, lakes
InnerOuter_Suburbs <- erase_water(InnerOuter_Suburbs)
ggplot() +
geom_sf(data = InnerOuter_Suburbs[InnerOuter_Suburbs$STATEFP == 42, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Pittsburgh", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 42, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Pittsburgh", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Pittsburgh", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 41, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 37, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Charlotte", ], color = "yellow", fill = NA)
ggplot() +
geom_sf(data = Inner_Suburbs[Inner_Suburbs$STATEFP == 41, ], aes(fill = Suburb)) +
geom_sf(data = CentralCities_2011[CentralCities_2011$NAME == "Portland", ], color = "yellow", fill = NA)
